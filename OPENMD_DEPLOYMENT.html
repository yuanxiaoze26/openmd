<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OpenMD éƒ¨ç½²å®æˆ˜æ–‡æ¡£</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'PingFang SC', 'Microsoft YaHei', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #334155;
      line-height: 1.7;
      padding: 40px 20px;
      min-height: 100vh;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 48px 40px;
      text-align: center;
    }
    .header h1 {
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 12px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    .header .subtitle {
      font-size: 18px;
      opacity: 0.95;
      margin-bottom: 8px;
    }
    .header .meta {
      font-size: 14px;
      opacity: 0.85;
    }
    .content { padding: 40px; }
    h2 {
      font-size: 24px;
      font-weight: 600;
      color: #1e293b;
      margin-top: 40px;
      margin-bottom: 20px;
      padding-bottom: 12px;
      border-bottom: 3px solid #667eea;
    }
    h3 {
      font-size: 18px;
      font-weight: 600;
      color: #334155;
      margin-top: 24px;
      margin-bottom: 12px;
    }
    p { margin-bottom: 16px; font-size: 15px; }
    ul, ol { margin-bottom: 16px; padding-left: 24px; }
    li { margin-bottom: 8px; font-size: 15px; }
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin: 24px 0;
    }
    .feature-card {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border: 1px solid #7dd3fc;
      border-radius: 12px;
      padding: 20px;
    }
    .feature-icon { font-size: 32px; margin-bottom: 8px; }
    .feature-title {
      font-weight: 600;
      font-size: 16px;
      color: #0c4a6e;
      margin-bottom: 6px;
    }
    .feature-desc {
      font-size: 14px;
      color: #0369a1;
      line-height: 1.5;
    }
    .tech-stack {
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
    }
    .tech-item {
      display: flex;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid #e2e8f0;
    }
    .tech-item:last-child { border-bottom: none; }
    .tech-icon {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      margin-right: 12px;
      font-size: 14px;
    }
    .tech-name { font-weight: 600; color: #1e293b; flex: 1; }
    .tech-desc { font-size: 13px; color: #64748b; }
    .code-block {
      background: #1e293b;
      color: #e2e8f0;
      border-radius: 8px;
      padding: 20px;
      margin: 16px 0;
      overflow-x: auto;
    }
    .code-block code {
      font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
      font-size: 13px;
      line-height: 1.6;
      white-space: pre;
    }
    .code-block .comment { color: #64748b; }
    .code-block .keyword { color: #c084fc; }
    .code-block .string { color: #86efac; }
    .code-block .function { color: #60a5fa; }
    .api-endpoint {
      background: #f0fdf4;
      border-left: 4px solid #22c55e;
      border-radius: 8px;
      padding: 16px 20px;
      margin: 12px 0;
    }
    .api-method {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 4px;
      font-weight: 700;
      font-size: 12px;
      margin-right: 8px;
    }
    .method-get { background: #3b82f6; color: white; }
    .method-post { background: #22c55e; color: white; }
    .method-put { background: #f59e0b; color: white; }
    .method-delete { background: #ef4444; color: white; }
    .api-url {
      font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
      font-size: 14px;
      color: #1e293b;
    }
    .api-desc {
      font-size: 14px;
      color: #475569;
      margin-top: 8px;
    }
    .problem-card {
      background: #fef2f2;
      border: 1px solid #fca5a5;
      border-radius: 12px;
      padding: 20px;
      margin: 16px 0;
    }
    .problem-title {
      font-weight: 600;
      color: #991b1b;
      font-size: 16px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }
    .problem-title::before {
      content: "âš ï¸";
      margin-right: 8px;
    }
    .solution-card {
      background: #f0fdf4;
      border: 1px solid #86efac;
      border-radius: 12px;
      padding: 20px;
      margin: 12px 0;
    }
    .solution-title {
      font-weight: 600;
      color: #166534;
      font-size: 16px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }
    .solution-title::before {
      content: "âœ…";
      margin-right: 8px;
    }
    .env-table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      font-size: 14px;
    }
    .env-table th {
      background: #f1f5f9;
      padding: 12px;
      text-align: left;
      font-weight: 600;
      color: #475569;
      border-bottom: 2px solid #e2e8f0;
    }
    .env-table td {
      padding: 12px;
      border-bottom: 1px solid #e2e8f0;
      color: #334155;
    }
    .env-table tr:hover { background: #f8fafc; }
    .status-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }
    .status-success { background: #dcfce7; color: #166534; }
    .status-error { background: #fee2e2; color: #991b1b; }
    .deployment-flow {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #f8fafc;
      border-radius: 12px;
      padding: 24px;
      margin: 20px 0;
      flex-wrap: wrap;
      gap: 16px;
    }
    .flow-step {
      flex: 1;
      min-width: 150px;
      text-align: center;
    }
    .flow-icon {
      width: 56px;
      height: 56px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 12px;
      font-size: 24px;
    }
    .flow-title {
      font-weight: 600;
      color: #1e293b;
      font-size: 14px;
      margin-bottom: 4px;
    }
    .flow-desc {
      font-size: 12px;
      color: #64748b;
    }
    .flow-arrow {
      font-size: 24px;
      color: #94a3b8;
    }
    .best-practice {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border: 1px solid #f59e0b;
      border-radius: 12px;
      padding: 20px;
      margin: 16px 0;
    }
    .best-practice-title {
      font-weight: 600;
      color: #92400e;
      font-size: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
    }
    .best-practice-title::before {
      content: "ğŸ’¡";
      margin-right: 8px;
    }
    .footer {
      background: #f8fafc;
      padding: 32px 40px;
      text-align: center;
      color: #64748b;
      font-size: 14px;
      border-top: 1px solid #e2e8f0;
    }
    .footer a {
      color: #667eea;
      text-decoration: none;
      font-weight: 600;
    }
    .footer a:hover { text-decoration: underline; }
    .copy-btn {
      background: #667eea;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 8px 16px;
      font-size: 13px;
      cursor: pointer;
      margin-top: 8px;
      transition: all 0.2s;
    }
    .copy-btn:hover { background: #5a67d8; transform: translateY(-1px); }
    .copy-btn.copied { background: #22c55e; }
    @media (max-width: 640px) {
      .header { padding: 32px 20px; }
      .header h1 { font-size: 28px; }
      .content { padding: 24px 20px; }
      .feature-grid { grid-template-columns: 1fr; }
      .deployment-flow { flex-direction: column; }
      .flow-arrow { transform: rotate(90deg); }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸš€ OpenMD éƒ¨ç½²å®æˆ˜æ–‡æ¡£</h1>
      <p class="subtitle">AI åŸç”Ÿç¬”è®°å·¥å…·çš„ Vercel Serverless éƒ¨ç½²æŒ‡å—</p>
      <p class="meta">2026-02-11 | æ™“åŠ› & Claude Code</p>
    </div>

    <div class="content">
      <h2>ğŸ“– é¡¹ç›®æ¦‚è¿°</h2>
      <p>OpenMD æ˜¯ä¸€ä¸ªä¸“ä¸º AI Agent è®¾è®¡çš„ç¬”è®°å·¥å…·ï¼Œæ”¯æŒ Markdown åŸç”Ÿæ ¼å¼ã€ä¸€é”®åˆ†äº«å’Œç²¾ç¾çš„ HTML æ¸²æŸ“ã€‚æœ¬æ–‡æ¡£è®°å½•äº†ä»é›¶å¼€å§‹éƒ¨ç½² OpenMD åˆ° Vercel Serverless ç¯å¢ƒçš„å®Œæ•´è¿‡ç¨‹ï¼ŒåŒ…æ‹¬é‡åˆ°çš„é—®é¢˜ã€è§£å†³æ–¹æ¡ˆå’Œæœ€ä½³å®è·µã€‚</p>

      <h3>æ ¸å¿ƒç‰¹æ€§</h3>
      <div class="feature-grid">
        <div class="feature-card">
          <div class="feature-icon">ğŸ¤–</div>
          <div class="feature-title">Agent ä¼˜å…ˆ</div>
          <div class="feature-desc">ä¸“ä¸º AI Agent è®¾è®¡çš„ RESTful API</div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">ğŸ“</div>
          <div class="feature-title">Markdown åŸç”Ÿ</div>
          <div class="feature-desc">å®Œæ•´æ”¯æŒ Markdown è¯­æ³•</div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">ğŸ”—</div>
          <div class="feature-title">ä¸€é”®åˆ†äº«</div>
          <div class="feature-desc">æ”¯æŒå¯†ç ä¿æŠ¤å’Œè¿‡æœŸæ—¶é—´</div>
        </div>
        <div class="feature-card">
          <div class="feature-icon">ğŸ¨</div>
          <div class="feature-title">ç²¾ç¾æ¸²æŸ“</div>
          <div class="feature-desc">è‡ªåŠ¨æ¸²æŸ“ä¸ºç¾è§‚çš„ HTML</div>
        </div>
      </div>

      <h2>ğŸ—ï¸ æŠ€æœ¯æ¶æ„</h2>
      <div class="tech-stack">
        <div class="tech-item">
          <div class="tech-icon">N</div>
          <div class="tech-name">Node.js + Express</div>
          <div class="tech-desc">è½»é‡çº§æœåŠ¡å™¨æ¡†æ¶</div>
        </div>
        <div class="tech-item">
          <div class="tech-icon">M</div>
          <div class="tech-name">MySQL</div>
          <div class="tech-desc">é˜¿é‡Œäº‘ RDS æ•°æ®åº“</div>
        </div>
        <div class="tech-item">
          <div class="tech-icon">V</div>
          <div class="tech-name">Vercel</div>
          <div class="tech-desc">Serverless éƒ¨ç½²å¹³å°</div>
        </div>
        <div class="tech-item">
          <div class="tech-icon">S</div>
          <div class="tech-name">express-session</div>
          <div class="tech-desc">Session ç®¡ç†</div>
        </div>
      </div>

      <h3>éƒ¨ç½²æ¶æ„æµç¨‹</h3>
      <div class="deployment-flow">
        <div class="flow-step">
          <div class="flow-icon">ğŸ“</div>
          <div class="flow-title">ä»£ç å¼€å‘</div>
          <div class="flow-desc">æœ¬åœ°å¼€å‘è°ƒè¯•</div>
        </div>
        <div class="flow-arrow">â†’</div>
        <div class="flow-step">
          <div class="flow-icon">ğŸ“¦</div>
          <div class="flow-title">Git æ¨é€</div>
          <div class="flow-desc">myfork åˆ†æ”¯</div>
        </div>
        <div class="flow-arrow">â†’</div>
        <div class="flow-step">
          <div class="flow-icon">ğŸš€</div>
          <div class="flow-title">Vercel CLI</div>
          <div class="flow-desc">è§¦å‘éƒ¨ç½²</div>
        </div>
        <div class="flow-arrow">â†’</div>
        <div class="flow-step">
          <div class="flow-icon">ğŸŒ</div>
          <div class="flow-title">ç”Ÿäº§ç¯å¢ƒ</div>
          <div class="flow-desc">md.yuanze.com</div>
        </div>
      </div>

      <h2>âš™ï¸ ç¯å¢ƒå˜é‡é…ç½®</h2>
      <p>åœ¨ Vercel é¡¹ç›®ä¸­éœ€è¦é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼ˆæ‰€æœ‰ç¯å¢ƒï¼šProductionã€Previewã€Developmentï¼‰ï¼š</p>
      <table class="env-table">
        <thead>
          <tr>
            <th>å˜é‡å</th>
            <th>å€¼</th>
            <th>è¯´æ˜</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>DB_TYPE</code></td>
            <td><code>mysql</code></td>
            <td>æ•°æ®åº“ç±»å‹</td>
          </tr>
          <tr>
            <td><code>DB_HOST</code></td>
            <td><code>182.92.238.143</code></td>
            <td>MySQL ä¸»æœºåœ°å€</td>
          </tr>
          <tr>
            <td><code>DB_PORT</code></td>
            <td><code>9001</code></td>
            <td>MySQL ç«¯å£</td>
          </tr>
          <tr>
            <td><code>DB_NAME</code></td>
            <td><code>openmd</code></td>
            <td>æ•°æ®åº“åç§°</td>
          </tr>
          <tr>
            <td><code>DB_USER</code></td>
            <td><code>openmd</code></td>
            <td>æ•°æ®åº“ç”¨æˆ·å</td>
          </tr>
          <tr>
            <td><code>DB_PASSWORD</code></td>
            <td><code>***</code></td>
            <td>æ•°æ®åº“å¯†ç </td>
          </tr>
          <tr>
            <td><code>SESSION_SECRET</code></td>
            <td><code>***</code></td>
            <td>Session åŠ å¯†å¯†é’¥</td>
          </tr>
        </tbody>
      </table>

      <h2>ğŸ”¥ éƒ¨ç½²è¿‡ç¨‹ä¸é—®é¢˜è§£å†³</h2>

      <div class="problem-card">
        <div class="problem-title">é—®é¢˜ 1ï¼šServerless Function å´©æºƒ (500 é”™è¯¯)</div>
        <p>éƒ¨ç½²åè®¿é—®ç½‘ç«™å‡ºç° <code>FUNCTION_INVOCATION_FAILED</code> é”™è¯¯ï¼Œæ—¥å¿—æ˜¾ç¤ºå‡½æ•°å´©æºƒã€‚</p>
      </div>

      <div class="solution-card">
        <div class="solution-title">è§£å†³æ–¹æ¡ˆï¼šå®‰è£…ç¼ºå¤±ä¾èµ–</div>
        <p>é”™è¯¯åŸå› æ˜¯ <code>express-mysql-session</code> ä¾èµ–æœªå®‰è£…ã€‚åœ¨ package.json ä¸­æ·»åŠ ä¾èµ–å¹¶é‡æ–°å®‰è£…ï¼š</p>
        <div class="code-block">
          <code><span class="comment"># å®‰è£… MySQL Session Store ä¾èµ–</span>
npm install express-mysql-session</code>
        </div>
      </div>

      <div class="problem-card">
        <div class="problem-title">é—®é¢˜ 2ï¼šSession Store é…ç½®é”™è¯¯</div>
        <p>ä»£ç æ€»æ˜¯å°è¯•åˆ›å»º MySQLStoreï¼Œä½†åœ¨é MySQL ç¯å¢ƒä¸‹ä¼šå¤±è´¥ã€‚</p>
      </div>

      <div class="solution-card">
        <div class="solution-title">è§£å†³æ–¹æ¡ˆï¼šåŠ¨æ€é€‰æ‹© Session Store</div>
        <p>æ ¹æ® DB_TYPE ç¯å¢ƒå˜é‡åŠ¨æ€é€‰æ‹©åˆé€‚çš„ Session Storeï¼š</p>
        <div class="code-block">
          <code><span class="keyword">const</span> <span class="function">DB_TYPE</span> = (process.env.DB_TYPE || <span class="string">'sqlite'</span>).<span class="function">trim</span>();

<span class="keyword">let</span> sessionStore;

<span class="keyword">if</span> (DB_TYPE === <span class="string">'mysql'</span>) {
  <span class="comment">// MySQL æ¨¡å¼ï¼šä½¿ç”¨ MySQLStore æŒä¹…åŒ– session</span>
  <span class="keyword">const</span> sessionStoreOptions = {
    host: process.env.DB_HOST,
    port: process.env.DB_PORT,
    user: process.env.DB_USER,
    password: process.env.DB_PASSWORD,
    database: process.env.DB_NAME,
    createDatabaseTable: <span class="keyword">true</span>,
    expiration: <span class="number">7</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>
  };
  sessionStore = <span class="keyword">new</span> <span class="function">MySQLStore</span>(sessionStoreOptions);
} <span class="keyword">else</span> {
  <span class="comment">// SQLite æ¨¡å¼ï¼šä½¿ç”¨ MemoryStore</span>
  sessionStore = <span class="keyword">new</span> <span class="function">session.MemoryStore</span>();
}</code>
        </div>
        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶ä»£ç </button>
      </div>

      <div class="problem-card">
        <div class="problem-title">é—®é¢˜ 3ï¼šç¯å¢ƒå˜é‡åŒ…å«æ¢è¡Œç¬¦</div>
        <p>é€šè¿‡ <code>echo "value" > file</code> åˆ›å»ºç¯å¢ƒå˜é‡æ—¶ï¼Œecho é»˜è®¤æ·»åŠ æ¢è¡Œç¬¦ï¼Œå¯¼è‡´ <code>DB_TYPE</code> çš„å€¼æ˜¯ <code>"mysql\n"</code> è€Œä¸æ˜¯ <code>"mysql"</code>ã€‚</p>
        <p>ç—‡çŠ¶ï¼šè°ƒè¯• API æ˜¾ç¤º <code>DB_TYPE: "mysql\n"</code>ï¼Œå¯¼è‡´æ¡ä»¶åˆ¤æ–­ <code>DB_TYPE === 'mysql'</code> æ°¸è¿œå¤±è´¥ï¼Œæ•°æ®åº“æ€»æ˜¯å›é€€åˆ° SQLiteã€‚</p>
      </div>

      <div class="solution-card">
        <div class="solution-title">è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ trim() å¤„ç†ç¯å¢ƒå˜é‡</div>
        <p>åœ¨ä»£ç ä¸­å¯¹æ‰€æœ‰ç¯å¢ƒå˜é‡ä½¿ç”¨ <code>.trim()</code> å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦ï¼š</p>
        <div class="code-block">
          <code><span class="comment">// ä¿®å¤ç¯å¢ƒå˜é‡æ¢è¡Œç¬¦é—®é¢˜</span>
<span class="keyword">const</span> <span class="function">DB_TYPE</span> = (process.env.DB_TYPE || <span class="string">'sqlite'</span>).<span class="function">trim</span>();
<span class="keyword">const</span> <span class="function">DB_HOST</span> = (process.env.DB_HOST || <span class="string">'localhost'</span>).<span class="function">trim</span>();
<span class="keyword">const</span> <span class="function">DB_PORT</span> = <span class="function">parseInt</span>((process.env.DB_PORT || <span class="string">'3306'</span>).<span class="function">trim</span>());
<span class="keyword">const</span> <span class="function">DB_USER</span> = (process.env.DB_USER || <span class="string">'root'</span>).<span class="function">trim</span>();
<span class="keyword">const</span> <span class="function">DB_PASSWORD</span> = (process.env.DB_PASSWORD || <span class="string">''</span>).<span class="function">trim</span>();
<span class="keyword">const</span> <span class="function">DB_NAME</span> = (process.env.DB_NAME || <span class="string">'openmd'</span>).<span class="function">trim</span>();</code>
        </div>
        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶ä»£ç </button>
      </div>

      <div class="problem-card">
        <div class="problem-title">é—®é¢˜ 4ï¼šVercel ç¯å¢ƒå˜é‡æœªé…ç½®</div>
        <p>éƒ¨ç½²ååº”ç”¨ä»ç„¶ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œç¯å¢ƒå˜é‡æ²¡æœ‰ç”Ÿæ•ˆã€‚</p>
      </div>

      <div class="solution-card">
        <div class="solution-title">è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Vercel CLI é…ç½®ç¯å¢ƒå˜é‡</div>
        <p>é€šè¿‡ Vercel CLI ä¸ºæ‰€æœ‰ç¯å¢ƒï¼ˆProductionã€Previewã€Developmentï¼‰æ·»åŠ ç¯å¢ƒå˜é‡ï¼š</p>
        <div class="code-block">
          <code><span class="comment"># ä½¿ç”¨ Vercel Token ç™»å½•</span>
npx vercel login --token &lt;YOUR_TOKEN&gt;

<span class="comment"># åˆ›å»ºä¸´æ—¶æ–‡ä»¶å­˜å‚¨å˜é‡å€¼ï¼ˆé¿å…æ¢è¡Œç¬¦ï¼‰</span>
<span class="function">printf</span> <span class="string">"mysql"</span> > /tmp/vercel_env.txt

<span class="comment"># ä¸ºæ‰€æœ‰ç¯å¢ƒæ·»åŠ å˜é‡</span>
npx vercel env add DB_TYPE production < /tmp/vercel_env.txt
npx vercel env add DB_TYPE preview < /tmp/vercel_env.txt
npx vercel env add DB_TYPE development < /tmp/vercel_env.txt

<span class="comment"># éªŒè¯ç¯å¢ƒå˜é‡</span>
npx vercel env ls</code>
        </div>
        <button class="copy-btn" onclick="copyCode(this)">å¤åˆ¶ä»£ç </button>
      </div>

      <h2>ğŸ“¡ API æ¥å£æ–‡æ¡£</h2>

      <div class="api-endpoint">
        <div>
          <span class="api-method method-post">POST</span>
          <span class="api-url">/api/notes</span>
        </div>
        <div class="api-desc">åˆ›å»ºæ–°ç¬”è®°</div>
        <div class="code-block" style="margin-top: 12px;">
          <code>curl -X POST https://md.yuanze.com/api/notes \
  -H <span class="string">"Content-Type: application/json"</span> \
  -d <span class="string">'{
    "title": "æˆ‘çš„ç¬”è®°",
    "content": "# Hello World\n\nè¿™æ˜¯ç¬”è®°å†…å®¹",
    "metadata": {"author": "Claude"}
  }'</span></code>
        </div>
      </div>

      <div class="api-endpoint">
        <div>
          <span class="api-method method-get">GET</span>
          <span class="api-url">/api/notes</span>
        </div>
        <div class="api-desc">è·å–æ‰€æœ‰ç¬”è®°åˆ—è¡¨</div>
        <div class="code-block" style="margin-top: 12px;">
          <code>curl https://md.yuanze.com/api/notes</code>
        </div>
      </div>

      <div class="api-endpoint">
        <div>
          <span class="api-method method-get">GET</span>
          <span class="api-url">/api/notes/:id</span>
        </div>
        <div class="api-desc">è·å–æŒ‡å®šç¬”è®°è¯¦æƒ…</div>
      </div>

      <div class="api-endpoint">
        <div>
          <span class="api-method method-put">PUT</span>
          <span class="api-url">/api/notes/:id</span>
        </div>
        <div class="api-desc">æ›´æ–°ç¬”è®°å†…å®¹</div>
      </div>

      <div class="api-endpoint">
        <div>
          <span class="api-method method-delete">DELETE</span>
          <span class="api-url">/api/notes/:id</span>
        </div>
        <div class="api-desc">åˆ é™¤ç¬”è®°</div>
      </div>

      <div class="api-endpoint">
        <div>
          <span class="api-method method-get">GET</span>
          <span class="api-url">/api/health</span>
        </div>
        <div class="api-desc">å¥åº·æ£€æŸ¥ï¼ˆæŸ¥çœ‹æ•°æ®åº“è¿æ¥çŠ¶æ€ï¼‰</div>
        <div class="code-block" style="margin-top: 12px;">
          <code><span class="comment"># å“åº”ç¤ºä¾‹</span>
{
  <span class="string">"status"</span>: <span class="string">"healthy"</span>,
  <span class="string">"database"</span>: <span class="string">"openmd"</span>,
  <span class="string">"host"</span>: <span class="string">"182.92.238.143"</span>,
  <span class="string">"port"</span>: <span class="number">9001</span>
}</code>
        </div>
      </div>

      <h2>ğŸ’¡ æœ€ä½³å®è·µä¸ç»éªŒæ€»ç»“</h2>

      <div class="best-practice">
        <div class="best-practice-title">ç¯å¢ƒå˜é‡å¤„ç†</div>
        <p><strong>å§‹ç»ˆä½¿ç”¨ .trim() å¤„ç†ç¯å¢ƒå˜é‡</strong></p>
        <p>åœ¨ Vercel CLI ç¯å¢ƒä¸­ï¼Œç¯å¢ƒå˜é‡å¯èƒ½åŒ…å«ä¸å¯è§çš„æ¢è¡Œç¬¦ã€‚åœ¨ä»£ç ä¸­å¯¹æ‰€æœ‰ç¯å¢ƒå˜é‡ä½¿ç”¨ <code>.trim()</code> å¯ä»¥é¿å…å¾ˆå¤šéš¾ä»¥è°ƒè¯•çš„é—®é¢˜ã€‚</p>
        <div class="code-block">
          <code><span class="comment">// âœ… å¥½çš„åšæ³•</span>
<span class="keyword">const</span> <span class="function">DB_TYPE</span> = (process.env.DB_TYPE || <span class="string">'sqlite'</span>).<span class="function">trim</span>();

<span class="comment">// âŒ ä¸å¥½çš„åšæ³•</span>
<span class="keyword">const</span> <span class="function">DB_TYPE</span> = process.env.DB_TYPE || <span class="string">'sqlite'</span>;</code>
        </div>
      </div>

      <div class="best-practice">
        <div class="best-practice-title">Vercel éƒ¨ç½²éªŒè¯</div>
        <p><strong>éƒ¨ç½²å‰éªŒè¯ç¯å¢ƒå˜é‡å®Œæ•´æ€§</strong></p>
        <p>åœ¨éƒ¨ç½²å‰ä½¿ç”¨ <code>npx vercel env ls</code> ç¡®è®¤æ‰€æœ‰å¿…éœ€çš„ç¯å¢ƒå˜é‡éƒ½å·²é…ç½®ã€‚ä½¿ç”¨è°ƒè¯• APIï¼ˆå¦‚ <code>/api/debug/env</code>ï¼‰éªŒè¯è¿è¡Œæ—¶ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®åŠ è½½ã€‚</p>
      </div>

      <div class="best-practice">
        <div class="best-practice-title">Session ç®¡ç†ç­–ç•¥</div>
        <p><strong>Serverless ç¯å¢ƒå¿…é¡»ä½¿ç”¨æŒä¹…åŒ– Session å­˜å‚¨</strong></p>
        <p>Vercel Serverless ç¯å¢ƒä¸­ï¼ŒMemoryStore ä¼šå¯¼è‡´ session ä¸¢å¤±ã€‚å¿…é¡»ä½¿ç”¨ MySQL Store æˆ–å…¶ä»–æŒä¹…åŒ–å­˜å‚¨æ–¹æ¡ˆæ¥ä¿æŒç”¨æˆ·ç™»å½•çŠ¶æ€ã€‚</p>
      </div>

      <div class="best-practice">
        <div class="best-practice-title">æ¸è¿›å¼è°ƒè¯•</div>
        <p><strong>æ·»åŠ è°ƒè¯•æ¥å£ï¼Œé€æ­¥éªŒè¯</strong></p>
        <p>å½“é‡åˆ°éƒ¨ç½²é—®é¢˜æ—¶ï¼Œæ·»åŠ  <code>/api/debug</code> ç«¯ç‚¹æ¥æ£€æŸ¥ç¯å¢ƒå˜é‡ã€æ•°æ®åº“è¿æ¥ç­‰ï¼Œé€æ­¥å®šä½é—®é¢˜æ ¹æºã€‚ä¸è¦çŒœæµ‹ï¼Œè¦éªŒè¯ã€‚</p>
      </div>

      <h2>âœ… éƒ¨ç½²éªŒè¯æ¸…å•</h2>
      <ul>
        <li><span class="status-badge status-success">âœ“</span> å¥åº·æ£€æŸ¥æ¥å£è¿”å› MySQL è¿æ¥æ­£å¸¸</li>
        <li><span class="status-badge status-success">âœ“</span> åˆ›å»ºç¬”è®°åŠŸèƒ½æ­£å¸¸</li>
        <li><span class="status-badge status-success">âœ“</span> è·å–ç¬”è®°åˆ—è¡¨æ­£å¸¸</li>
        <li><span class="status-badge status-success">âœ“</span> æ›´æ–°ç¬”è®°åŠŸèƒ½æ­£å¸¸</li>
        <li><span class="status-badge status-success">âœ“</span> åˆ é™¤ç¬”è®°åŠŸèƒ½æ­£å¸¸</li>
        <li><span class="status-badge status-success">âœ“</span> ç¬”è®°é¡µé¢æ¸²æŸ“æ­£å¸¸</li>
        <li><span class="status-badge status-success">âœ“</span> Session æŒä¹…åŒ–æ­£å¸¸</li>
      </ul>

      <h2>ğŸŒ è®¿é—®åœ°å€</h2>
      <ul>
        <li><strong>ç”Ÿäº§ç¯å¢ƒ</strong>: <a href="https://md.yuanze.com" target="_blank">https://md.yuanze.com</a></li>
        <li><strong>Vercel åŸŸå</strong>: <a href="https://openmd-github.vercel.app" target="_blank">https://openmd-github.vercel.app</a></li>
        <li><strong>GitHub ä»“åº“</strong>: <a href="https://github.com/yuanxiaoze26/openmd" target="_blank">https://github.com/yuanxiaoze26/openmd</a></li>
      </ul>

      <h2>ğŸ“š æŠ€æœ¯è¦ç‚¹å›é¡¾</h2>
      <ol>
        <li><strong>ä¾èµ–ç®¡ç†</strong>: ç¡®ä¿ package.json ä¸­åŒ…å«æ‰€æœ‰å¿…éœ€ä¾èµ–</li>
        <li><strong>ç¯å¢ƒé…ç½®</strong>: ä½¿ç”¨ Vercel CLI ä¸ºæ‰€æœ‰ç¯å¢ƒé…ç½®å˜é‡</li>
        <li><strong>æ•°æ®æ¸…æ´—</strong>: å¯¹æ‰€æœ‰ç¯å¢ƒå˜é‡ä½¿ç”¨ <code>.trim()</code> å¤„ç†</li>
        <li><strong>Session å­˜å‚¨</strong>: Serverless ç¯å¢ƒå¿…é¡»ä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨</li>
        <li><strong>è°ƒè¯•æ–¹æ³•</strong>: æ·»åŠ è°ƒè¯•æ¥å£ï¼Œé€æ­¥éªŒè¯é—®é¢˜</li>
        <li><strong>éƒ¨ç½²éªŒè¯</strong>: éƒ¨ç½²åéªŒè¯æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ</li>
      </ol>

      <p style="margin-top: 32px; padding: 20px; background: #f0f9ff; border-radius: 8px; border-left: 4px solid #0ea5e9;">
        <strong>ğŸ¯ æ€»ç»“</strong><br>
        OpenMD é¡¹ç›®å±•ç¤ºäº† AI Agent ä¸ä¼ ç»Ÿ Web å¼€å‘çš„å®Œç¾ç»“åˆã€‚é€šè¿‡ Vercel Serverless å’Œ MySQL çš„ç»„åˆï¼Œå®ç°äº†ä¸€ä¸ªé«˜æ€§èƒ½ã€å¯æ‰©å±•çš„ç¬”è®°ç³»ç»Ÿã€‚éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„ç¯å¢ƒå˜é‡ã€Session å­˜å‚¨ã€ä¾èµ–ç®¡ç†ç­‰é—®é¢˜éƒ½æ˜¯ Serverless éƒ¨ç½²çš„å…¸å‹åœºæ™¯ï¼Œè§£å†³æ–¹æ¡ˆå¯ä»¥ä¸ºç±»ä¼¼é¡¹ç›®æä¾›å‚è€ƒã€‚
      </p>
    </div>

    <div class="footer">
      <p>ğŸ“ éƒ¨ç½²æ—¥æœŸ: 2026-02-11 | æŠ€æœ¯æ ˆ: Node.js + Express + MySQL + Vercel</p>
      <p>ğŸ‘¥ å›¢é˜Ÿ: æ™“åŠ› & Claude Code | çŠ¶æ€: <span class="status-badge status-success">âœ“ ç”Ÿäº§ç¯å¢ƒè¿è¡Œä¸­</span></p>
      <p style="margin-top: 16px;">
        <a href="https://md.yuanze.com" target="_blank">è®¿é—®ç”Ÿäº§ç¯å¢ƒ</a> |
        <a href="https://github.com/yuanxiaoze26/openmd" target="_blank">GitHub ä»“åº“</a>
      </p>
    </div>
  </div>

  <script>
    function copyCode(btn) {
      const codeBlock = btn.previousElementSibling;
      const code = codeBlock.textContent;
      navigator.clipboard.writeText(code).then(() => {
        const originalText = btn.textContent;
        btn.textContent = 'å·²å¤åˆ¶ï¼';
        btn.classList.add('copied');
        setTimeout(() => {
          btn.textContent = originalText;
          btn.classList.remove('copied');
        }, 2000);
      });
    }
  </script>
</body>
</html>